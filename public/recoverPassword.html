<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IDCM</title>

    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/styleRecoverPassword.css" />
    <link rel="stylesheet" href="./css/styleModal.css" />
  </head>

  <body>
    <header>
      <nav>
        <div class="logo"></div>

        <ul>
          <li><a class="now" href="login.html">Recuperar Senha</a></li>
          <li><a href="index.html">Home</a></li>
          <li><a href="calculator.html">Calculadora</a></li>
        </ul>
        <button onclick="changeScreenSingIn()" class="button1">Entrar</button>
        <button onclick="changeScreenRecPassDark()" class="button2">
          <img src="./assets/darkMode.png" alt="darkMode" />
        </button>
      </nav>
    </header>

    <div class="login">
      <form action="">
        <h1>Recuperar Senha!</h1>
        <div class="left">
          <h3>Nova Senha:</h3>
        </div>
        <input id="recoverPassword" class="inputLogin" type="password" />
        <div class="left">
          <h3>Repita a Senha:</h3>
        </div>
        <input id="recoverPassword2" class="inputPassword" type="password" />
        <div class="row3">
          <div><input class="inputCheck" type="radio" />Lembre me</div>
        </div>
        <button onclick="changeScreenSingIn()" type="button" class="button5">
          Salvar
        </button>
        <h3>
          Não possui conta?
          <a href="signUp.html"> <i style="color: #0099ff">Cadastre-se </i></a>
        </h3>
      </form>
    </div>
    <img class="wavesLogin" src="./assets/wavesLogin.svg" alt="wavesLogin" />

    <div id="modalRecoverPassword" class="modalBody">
      <div class="modalReadPlus">
        <div class="containerReadPlus">
          <div class="modalCheck">
            <img src="./assets/modalCheck.svg" alt="check" />
          </div>
          <button onclick="buttonBack()" class="modalBack">&times;</button>
        </div>
        <h2>Senha recuperada com sucesso!</h2>
        <h2>Redirecionaremos você para o login.</h2>
        <button class="button8" onclick="buttonBack()">Fechar</button>
      </div>
    </div>

    <div id="modalRecoverPassword2" class="modalBody">
      <div class="modalReadPlus">
        <div class="containerReadPlus">
          <div class="modalCheck">
            <img src="./assets/modalCheck.svg" alt="check" />
          </div>
          <button onclick="buttonBack()" class="modalBack">&times;</button>
        </div>
        <h2>
          insira uma senha entre 8 e 20 caracteres, com pelo menos uma letra
          maiuscula e uma letra minuscula, um número e um caractere especial!
        </h2>
        <button class="button8" onclick="buttonBack()">Fechar</button>
      </div>
    </div>

    <div id="modalRecoverPassword3" class="modalBody">
      <div class="modalReadPlus">
        <div class="containerReadPlus">
          <div class="modalCheck">
            <img src="./assets/modalCheck.svg" alt="check" />
          </div>
          <button onclick="buttonBack()" class="modalBack">&times;</button>
        </div>
        <h2>Digite senhas iguais!</h2>
        <button class="button8" onclick="buttonBack()">Fechar</button>
      </div>
    </div>
  </body>
</html>

<script>
  function buttonBack() {
    modalRecoverPassword.style.display = "none";
    modalRecoverPassword2.style.display = "none";
    modalRecoverPassword3.style.display = "none";
  }

  function changeScreenSingIn() {
    var password = recoverPassword.value;
    var password2 = recoverPassword2.value;
    const regex =
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!#%*?&])[A-Za-z\d@$!#%*?&]{8,20}$/;
    const passwordTest = regex.test(password);
    const passwordTest2 = regex.test(password2);

    if (!passwordTest || !passwordTest2) {
      modalRecoverPassword2.style.display = "block";
    } else if (password.length != password2.length) {
      modalRecoverPassword3.style.display = "block";
    } else {
      modalRecoverPassword.style.display = "block";
      setTimeout("location.href = 'login.html';", 2000);
    }
  }
</script>
